<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student todo List Using Array</title>
    <style>
        body{
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        h2{
            margin-top: 30px;
        }

        ul{
            list-style-type: square;
        }

        table{
            border-collapse: collapse;
            width: 60%;
        }

        table, th, td {
            border: 1px solid slateblue;
        }
        th, td{
            padding: 8px;
            text-align: center;
        }
        .fail {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>1.Student management</h1>
    <ul id="allStudents"></ul>

    <h2>2. Student Scored More Than 60</h2>
    <ul id="above60"></ul>

    <h2>3. Department Count</h2>
    <p id="deptCount"></p>

    <h2>4. Student with Highest Marks</h2>
    <p id="topper"></p>

    <h2>5. Student table</h2>
    <table id="studentTable">
        <tr>
            <th>Name</th>
            <th>Marks</th>
            <th>Department</th>
        </tr>
    </table>

    <h2>6. Average Marks</h2>
    <p id="average"></p>

    <h2>7. CSE Students</h2>
    <ul id="cseStudents"></ul>

    <h2>8. Students Sorted by Marks (Descending)</h2>
    <ul id="sortedStudents"></ul>

    <h2>9. After Adding New Student</h2>
    <ul id="updatedList"></ul>

    <script>
        const students=[
            {id: 1, name: "Nimisha", marks: 78, department: "CSE"},
            {id: 2, name: "saii", marks: 92, department: "ECE"},
            {id: 3, name: "Bhavya", marks: 45, department: "MECH"},
            {id: 4, name: "Rajendraprasad", marks: 66, department: "CSE"},
            {id: 5, name: "vyshu", marks: 88, department: "ECE"}
        ];

        let allStudents = document.getElementById("allStudents");
        let above60 = document.getElementById("above60");
        let deptCount = document.getElementById("deptCount");
        let topper = document.getElementById("topper");
        let table = document.getElementById("studentTable");
        let average = document.getElementById("average");
        let cseStudents = document.getElementById("cseStudents");
        let sortedStudents = document.getElementById("sortedStudents");
        let updatedList = document.getElementById("updatedList");

        students.forEach(student =>{
            let li = document.createElement("li");
            li.textContent = student.name;
            allStudents.appendChild(li);
        });

        students.filter(s => s.marks > 60).forEach(s => {
            let li = document.createElement("li");
            li.textContent=s.name+ "("+ s.marks + ")";
            above60.appendChild(li);
        });

        let departmentCounts = students.reduce((acc, s) => {
            acc[s.department] = (acc[s.department] || 0)+1;
            return acc;
        }, {});

        deptCount.textContent=JSON.stringify(departmentCounts);

        let highest = students.reduce((max,s) => s.marks > max.marks ? s : max);
        topper.textContent = highest.name+ " - "+highest.marks;

        students.forEach(s => {
            let row = table.insertRow();
            row.insertCell(0).textContent = s.name;
            row.insertCell(1).textContent=s.marks;
            row.insertCell(2).textContent=s.department;

            if(s.marks < 50){
                row.classList.add("fail");
            }
        });

        let totalMarks = students.reduce((sum,s) => sum +s.marks, 0);
        average.textContent = (totalMarks / students.length).toFixed(2);

        students.filter(s => s.department === "CSE").forEach(s => {
            let li = document.createElement("li");
            li.textContent=s.name;
            cseStudents.appendChild(li);
        });

        let sorted = [...students].sort((a,b) => b.marks - a.marks);
        sorted.forEach(s =>{
            let li = document.createElement("li");
            li.textContent = s.name+ " - "+s.marks;
            sortedStudents.appendChild(li);
        });

        students.push( {id: 6, name: "asshu", marks: 55, department: "CSE" });

        students.forEach(s => {
            let li = document.createElement("li");
            li.textContent=s.name+ "("+ s.marks + ")";
            updatedList.appendChild(li);
        });


    </script>

</body>
</html>